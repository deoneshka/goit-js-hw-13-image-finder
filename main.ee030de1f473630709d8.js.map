{"version":3,"sources":["webpack:///./templates/images-list.hbs","webpack:///./js/pnotifyErrors.js","webpack:///./js/apiService.js","webpack:///./index.js","webpack:///./js/getRefs.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","defaultModules","set","PNotifyMobile","searchError","error","title","text","delay","noResult","emptySearch","noMoreResult","API","this","searchQuery","page","fetchImages","url","BASE_URL","fetch","response","json","result","incrementPage","resetPage","newQuery","refs","searchForm","document","querySelector","gallery","loadMoreBtn","observer","apiService","renderImagesList","images","undefined","hits","length","total","setAttribute","insertAdjacentHTML","imagesTemplate","removeAttribute","clearGallery","innerHTML","scrollElements","scrollHeight","Math","max","body","offsetHeight","clientHeight","setTimeout","window","scrollTo","top","behavior","event","preventDefault","currentTarget","elements","query","value","addEventListener"],"mappings":"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","file":"main.ee030de1f473630709d8.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery-item\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img class=\\\"image\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":32},\"end\":{\"line\":4,\"column\":48}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":55},\"end\":{\"line\":4,\"column\":63}}}) : helper)))\n    + \"\\\" />\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":16},\"end\":{\"line\":8,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":16},\"end\":{\"line\":12,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":16},\"end\":{\"line\":16,\"column\":28}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":16},\"end\":{\"line\":20,\"column\":29}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hits\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":25,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","import { error, defaultModules } from '../../node_modules/@pnotify/core/dist/PNotify.js';\r\nimport * as PNotifyMobile from '../../node_modules/@pnotify/mobile/dist/PNotifyMobile.js';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/mobile/dist/PNotifyMobile.css';\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\n\r\ndefaultModules.set(PNotifyMobile, {});\r\n\r\nfunction noResult() {\r\n    error({\r\n        title: 'Sorry!',\r\n        text: 'There are no such images! Try again)',\r\n        delay: 3000\r\n    });\r\n};\r\n\r\nfunction searchError() {\r\n    error({\r\n        title: 'Sorry!',\r\n        text: 'Error, no response from service! Try again later)',\r\n        delay: 3000\r\n    });\r\n};\r\n\r\nfunction emptySearch() {\r\n    error({\r\n        title: 'Sorry!',\r\n        text: 'You haven`t entered anything! Try again)',\r\n        delay: 3000\r\n    });    \r\n}\r\n\r\nfunction noMoreResult() {\r\n    error({\r\n        title: 'Sorry!',\r\n        text: 'There are no more images for this request!',\r\n        delay: 3000\r\n    });    \r\n}\r\n\r\nexport default { searchError, noResult, emptySearch, noMoreResult };\r\n","import error from './pnotifyErrors';\r\n\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\nconst API_KEY = '20697627-1a708263c5a563a5588011ca6';\r\n\r\nexport default class API {\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n\r\n  async fetchImages() {\r\n      try {\r\n          const url = `${BASE_URL}?key=${API_KEY}&q=${this.searchQuery}&image_type=photo&orientation=horizontal&per_page=12&page=${this.page}`;\r\n          const response = await fetch(url);\r\n          const result = await response.json();\r\n          this.incrementPage();\r\n          return result;\r\n      } catch {\r\n          return error.searchError();\r\n      };\r\n  }\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n};","import API from './js/apiService';\r\nimport getRefs from './js/getRefs';\r\nimport imagesTemplate from './templates/images-list.hbs';\r\nimport error from './js/pnotifyErrors';\r\nimport './sass/styles.scss';\r\n\r\nconst refs = getRefs();\r\nconst apiService = new API();\r\n\r\nfunction renderImagesList(images) {\r\n    if (images === undefined) {\r\n        refs.loadMoreBtn.setAttribute('hidden', '');\r\n        return;\r\n    };\r\n\r\n    if (images.hits.length === 0 && images.total > 1) {\r\n        return error.noMoreResult();\r\n    };\r\n\r\n    if (images.total === 0) {\r\n        refs.loadMoreBtn.setAttribute('hidden', '');\r\n        return error.noResult();\r\n    };\r\n\r\n    refs.gallery.insertAdjacentHTML('beforeend', imagesTemplate(images));\r\n    refs.loadMoreBtn.removeAttribute('hidden');\r\n};\r\n\r\nfunction clearGallery() {\r\n    refs.gallery.innerHTML = '';\r\n};\r\n\r\nfunction scrollElements() {\r\n    const scrollHeight = Math.max(\r\n        document.body.scrollHeight, refs.gallery.scrollHeight,\r\n        document.body.offsetHeight, refs.gallery.offsetHeight,\r\n        document.body.clientHeight, refs.gallery.clientHeight);\r\n    \r\n    setTimeout(() => {\r\n        window.scrollTo({\r\n            top: scrollHeight,\r\n            behavior: 'smooth',\r\n        });\r\n    }, 500);\r\n};\r\n\r\nasync function searchImages(event) {\r\n    event.preventDefault();\r\n\r\n    if (event.currentTarget.elements.query.value === '') {\r\n        return error.emptySearch();\r\n    };\r\n\r\n    clearGallery();\r\n    apiService.query = event.currentTarget.elements.query.value;\r\n    apiService.resetPage();\r\n    const result = await apiService.fetchImages();\r\n    return renderImagesList(result);\r\n};\r\n\r\nasync function loadMore() {\r\n    const result = await apiService.fetchImages();\r\n    scrollElements();\r\n    return renderImagesList(result);\r\n};\r\n\r\nrefs.searchForm.addEventListener('submit', searchImages);\r\nrefs.loadMoreBtn.addEventListener('click', loadMore);\r\n\r\n\r\n\r\n\r\n","export default function getRefs() {\r\n    return {\r\n        searchForm: document.querySelector('#search-form'),\r\n        gallery: document.querySelector('.gallery'),\r\n        loadMoreBtn: document.querySelector('button'),\r\n        observer: document.querySelector('.last-item-observer'),\r\n    };\r\n};"],"sourceRoot":""}